// Importing necessary libraries and components
import React, { useContext, useEffect } from 'react'; // Import React and hooks for managing state and side effects
import { UserContext } from '@/UserContext'; // Import the UserContext to manage and access user state and actions
import Head from 'next/head'; // Import Head component for setting metadata in the HTML document head
import Production from '@/Components/Production'; // Import the Production component for displaying production-related content
import Image from 'next/image'; // Import Image component for optimized image loading
import Link from 'next/link'; // Import Link component for client-side navigation
import { useRouter } from 'next/router'; // Import useRouter hook for navigation

// Define the Startproduction functional component
function Startproduction() {
  // Use UserContext to access user state and handleLogout function
  const { user, handleLogout } = useContext(UserContext);
  // Initialize Next.js router
  const router = useRouter();

  return (
    <>
      {/* Head component for setting metadata in the HTML document head */}
      <Head>
        <title>MSSPL Start / Resume Production</title> {/* Page title */}
        <meta name="description" content="Generated by create next app" /> {/* Meta description */}
        <meta name="viewport" content="width=device-width, initial-scale=1" /> {/* Viewport settings for responsive design */}
        <link rel="icon" href="/favicon.ico" /> {/* Favicon link */}
      </Head>

      {/* Main content container */}
      <div className="content h-100">
        {/* Header Section */}
        <section>
          <div className="row">
            <div className="col">
              {/* Link to the production home page */}
              <Link href="/production-home">
                {/* Company logo */}
                <Image
                  className="header-logo"
                  src="/msspl-logo.png"
                  alt="logo"
                  width={115}
                  height={115}
                />
              </Link>
            </div>
            <div className="col centre pt-5">
              <p className="title">Start/Resume Production</p> {/* Page title */}
            </div>
            <div className="col pt-5 user-details">
              {/* Display user details if the user is logged in */}
              {user && (
                <>
                  <p className="username">User Name: {user.UserID}</p> {/* Display user ID */}
                  {user.Branch && user.Branch.length > 0 && (
                    <p className="branch">Branch: {user.Branch[0].BranchName}</p> 
                  )}
                  <button onClick={handleLogout}>Logout</button> {/* Logout button */}
                </>
              )}
            </div>
          </div>
          <hr /> {/* Horizontal line */}

          {/* Form Content */}
          <Production /> {/* Render the Production component */}

        </section>
      </div>
    </>
  );
}

// Export the Startproduction component as the default export
export default Startproduction;
